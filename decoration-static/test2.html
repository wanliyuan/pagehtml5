<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
这是一大段文本,按时大大,按时大大阿斯顿阿萨德阿什顿,按时大大,按时大大阿斯顿阿萨德阿什顿,这是中国
<script>
//    var input='这是一大段文本';
//    var keys=['这是','这里是','文本','一'];
    var input=document.body.innerHTML;
    var keys=['这是'];
    var prepareKeys=function(){
        if(!prepareKeys.$map){
            var map={};
            var maxLength=0;
            for(var i=0;i<keys.length;i++){
                map[keys[i]]=1;
                maxLength=Math.max(keys[i].length,maxLength);
            }
            prepareKeys.$map={
                map:map,
                length:maxLength
            }
        }
        return prepareKeys.$map;
    }

    var colorKeyword=function(str){
        var info=prepareKeys();
        var output=[];
        while(str){
            var sub=str.substring(0,info.length);
            str=str.substring(info.length);
            while(!info.map[sub]&&sub){
                str=sub.charAt(sub.length-1)+str;
                sub=sub.slice(0,-1);
                //console.log(sub);
            }
            console.log('color',sub);
            if(sub){
                output.push('#',sub,'#');
            }else{
                output.push(str.charAt(0));
                str=str.substring(1);
            }
        }
        return output.join('');
    }
    colorKeyword(input);
</script>
</body>
</html>